Ballerina File(0,2845)
  IMPORT_DECLARATION(0,21)
    PsiElement(import)('import')(0,6)
    PsiWhiteSpace(' ')(6,7)
    ORG_NAME(7,16)
      PsiElement(identifier)('ballerina')(7,16)
    PsiElement(/)('/')(16,17)
    COMPLETE_PACKAGE_NAME(17,20)
      PACKAGE_NAME(17,20)
        PsiElement(identifier)('log')(17,20)
    PsiElement(;)(';')(20,21)
  PsiWhiteSpace('\n')(21,22)
  IMPORT_DECLARATION(22,44)
    PsiElement(import)('import')(22,28)
    PsiWhiteSpace(' ')(28,29)
    ORG_NAME(29,38)
      PsiElement(identifier)('ballerina')(29,38)
    PsiElement(/)('/')(38,39)
    COMPLETE_PACKAGE_NAME(39,43)
      PACKAGE_NAME(39,43)
        PsiElement(identifier)('http')(39,43)
    PsiElement(;)(';')(43,44)
  PsiWhiteSpace('\n\n')(44,46)
  DEFINITION(46,74)
    ANNOTATION_ATTACHMENT(46,52)
      PsiElement(@)('@')(46,47)
      NAME_REFERENCE(47,52)
        PsiElement(identifier)('final')(47,52)
    PsiWhiteSpace(' ')(52,53)
    DEFINITION(53,74)
      GLOBAL_VARIABLE_DEFINITION(53,74)
        SIMPLE_TYPE_NAME(53,59)
          VALUE_TYPE_NAME(53,59)
            PsiElement(string)('string')(53,59)
        PsiWhiteSpace(' ')(59,60)
        PsiElement(identifier)('NAME')(60,64)
        PsiWhiteSpace(' ')(64,65)
        PsiElement(=)('=')(65,66)
        PsiWhiteSpace(' ')(66,67)
        SIMPLE_LITERAL_EXPRESSION(67,73)
          SIMPLE_LITERAL(67,73)
            PsiElement(QUOTED_STRING_LITERAL)('"NAME"')(67,73)
        PsiElement(;)(';')(73,74)
  PsiWhiteSpace('\n')(74,75)
  DEFINITION(75,101)
    ANNOTATION_ATTACHMENT(75,81)
      PsiElement(@)('@')(75,76)
      NAME_REFERENCE(76,81)
        PsiElement(identifier)('final')(76,81)
    PsiWhiteSpace(' ')(81,82)
    DEFINITION(82,101)
      GLOBAL_VARIABLE_DEFINITION(82,101)
        SIMPLE_TYPE_NAME(82,88)
          VALUE_TYPE_NAME(82,88)
            PsiElement(string)('string')(82,88)
        PsiWhiteSpace(' ')(88,89)
        PsiElement(identifier)('AGE')(89,92)
        PsiWhiteSpace(' ')(92,93)
        PsiElement(=)('=')(93,94)
        PsiWhiteSpace(' ')(94,95)
        SIMPLE_LITERAL_EXPRESSION(95,100)
          SIMPLE_LITERAL(95,100)
            PsiElement(QUOTED_STRING_LITERAL)('"AGE"')(95,100)
        PsiElement(;)(';')(100,101)
  PsiWhiteSpace('\n\n')(101,103)
  DEFINITION(103,1358)
    ANNOTATION_ATTACHMENT(103,148)
      PsiElement(@)('@')(103,104)
      NAME_REFERENCE(104,122)
        PACKAGE_REFERENCE(104,109)
          PsiElement(identifier)('http')(104,108)
          PsiElement(:)(':')(108,109)
        PsiElement(identifier)('ServiceConfig')(109,122)
      PsiWhiteSpace(' ')(122,123)
      RECORD_LITERAL(123,148)
        PsiElement({)('{')(123,124)
        PsiWhiteSpace('\n    ')(124,129)
        RECORD_LITERAL_BODY(129,146)
          RECORD_KEY_VALUE(129,146)
            RECORD_KEY(129,137)
              VARIABLE_REFERENCE_EXPRESSION(129,137)
                SIMPLE_VARIABLE_REFERENCE(129,137)
                  NAME_REFERENCE(129,137)
                    PsiElement(identifier)('basePath')(129,137)
            PsiElement(:)(':')(137,138)
            PsiWhiteSpace(' ')(138,139)
            SIMPLE_LITERAL_EXPRESSION(139,146)
              SIMPLE_LITERAL(139,146)
                PsiElement(QUOTED_STRING_LITERAL)('"/chat"')(139,146)
        PsiWhiteSpace('\n')(146,147)
        PsiElement(})('}')(147,148)
    PsiWhiteSpace('\n')(148,149)
    DEFINITION(149,1358)
      SERVICE_DEFINITION(149,1358)
        PsiElement(service)('service')(149,156)
        PsiElement(<)('<')(156,157)
        NAME_REFERENCE(157,169)
          PACKAGE_REFERENCE(157,162)
            PsiElement(identifier)('http')(157,161)
            PsiElement(:)(':')(161,162)
          PsiElement(identifier)('Service')(162,169)
        PsiElement(>)('>')(169,170)
        PsiWhiteSpace(' ')(170,171)
        PsiElement(identifier)('chatAppUpgrader')(171,186)
        PsiWhiteSpace(' ')(186,187)
        SERVICE_ENDPOINT_ATTACHMENTS(187,206)
          PsiElement(bind)('bind')(187,191)
          PsiWhiteSpace(' ')(191,192)
          RECORD_LITERAL(192,206)
            PsiElement({)('{')(192,193)
            PsiWhiteSpace(' ')(193,194)
            RECORD_LITERAL_BODY(194,204)
              RECORD_KEY_VALUE(194,204)
                RECORD_KEY(194,198)
                  VARIABLE_REFERENCE_EXPRESSION(194,198)
                    SIMPLE_VARIABLE_REFERENCE(194,198)
                      NAME_REFERENCE(194,198)
                        PsiElement(identifier)('port')(194,198)
                PsiElement(:)(':')(198,199)
                PsiWhiteSpace(' ')(199,200)
                SIMPLE_LITERAL_EXPRESSION(200,204)
                  SIMPLE_LITERAL(200,204)
                    INTEGER_LITERAL(200,204)
                      PsiElement(DECIMAL_INTEGER_LITERAL)('9090')(200,204)
            PsiWhiteSpace(' ')(204,205)
            PsiElement(})('}')(205,206)
        PsiWhiteSpace(' ')(206,207)
        SERVICE_BODY(207,1358)
          PsiElement({)('{')(207,208)
          PsiWhiteSpace('\n\n    ')(208,214)
          PsiComment(LINE_COMMENT)('// Upgrade from HTTP to WebSocket and define the service the WebSocket client needs to connect to.')(214,312)
          PsiWhiteSpace('\n    ')(312,317)
          RESOURCE_DEFINITION(317,1356)
            ANNOTATION_ATTACHMENT(317,455)
              PsiElement(@)('@')(317,318)
              NAME_REFERENCE(318,337)
                PACKAGE_REFERENCE(318,323)
                  PsiElement(identifier)('http')(318,322)
                  PsiElement(:)(':')(322,323)
                PsiElement(identifier)('ResourceConfig')(323,337)
              PsiWhiteSpace(' ')(337,338)
              RECORD_LITERAL(338,455)
                PsiElement({)('{')(338,339)
                PsiWhiteSpace('\n        ')(339,348)
                RECORD_LITERAL_BODY(348,449)
                  RECORD_KEY_VALUE(348,449)
                    RECORD_KEY(348,364)
                      VARIABLE_REFERENCE_EXPRESSION(348,364)
                        SIMPLE_VARIABLE_REFERENCE(348,364)
                          NAME_REFERENCE(348,364)
                            PsiElement(identifier)('webSocketUpgrade')(348,364)
                    PsiElement(:)(':')(364,365)
                    PsiWhiteSpace(' ')(365,366)
                    RECORD_LITERAL_EXPRESSION(366,449)
                      RECORD_LITERAL(366,449)
                        PsiElement({)('{')(366,367)
                        PsiWhiteSpace('\n            ')(367,380)
                        RECORD_LITERAL_BODY(380,439)
                          RECORD_KEY_VALUE(380,402)
                            RECORD_KEY(380,391)
                              VARIABLE_REFERENCE_EXPRESSION(380,391)
                                SIMPLE_VARIABLE_REFERENCE(380,391)
                                  NAME_REFERENCE(380,391)
                                    PsiElement(identifier)('upgradePath')(380,391)
                            PsiElement(:)(':')(391,392)
                            PsiWhiteSpace(' ')(392,393)
                            SIMPLE_LITERAL_EXPRESSION(393,402)
                              SIMPLE_LITERAL(393,402)
                                PsiElement(QUOTED_STRING_LITERAL)('"/{name}"')(393,402)
                          PsiElement(,)(',')(402,403)
                          PsiWhiteSpace('\n            ')(403,416)
                          RECORD_KEY_VALUE(416,439)
                            RECORD_KEY(416,430)
                              VARIABLE_REFERENCE_EXPRESSION(416,430)
                                SIMPLE_VARIABLE_REFERENCE(416,430)
                                  NAME_REFERENCE(416,430)
                                    PsiElement(identifier)('upgradeService')(416,430)
                            PsiElement(:)(':')(430,431)
                            PsiWhiteSpace(' ')(431,432)
                            VARIABLE_REFERENCE_EXPRESSION(432,439)
                              SIMPLE_VARIABLE_REFERENCE(432,439)
                                NAME_REFERENCE(432,439)
                                  PsiElement(identifier)('chatApp')(432,439)
                        PsiWhiteSpace('\n        ')(439,448)
                        PsiElement(})('}')(448,449)
                PsiWhiteSpace('\n    ')(449,454)
                PsiElement(})('}')(454,455)
            PsiWhiteSpace('\n    ')(455,460)
            PsiElement(identifier)('upgrader')(460,468)
            PsiElement(()('(')(468,469)
            RESOURCE_PARAMETER_LIST(469,515)
              ENDPOINT_PARAMETER(469,515)
                PsiElement(endpoint)('endpoint')(469,477)
                PsiWhiteSpace(' ')(477,478)
                PsiElement(identifier)('caller')(478,484)
                PsiElement(,)(',')(484,485)
                PsiWhiteSpace(' ')(485,486)
                PARAMETER_LIST(486,515)
                  PARAMETER(486,502)
                    PARAMETER_WITH_TYPE(486,502)
                      SIMPLE_TYPE_NAME(486,498)
                        REFERENCE_TYPE_NAME(486,498)
                          USER_DEFINE_TYPE_NAME(486,498)
                            NAME_REFERENCE(486,498)
                              PACKAGE_REFERENCE(486,491)
                                PsiElement(identifier)('http')(486,490)
                                PsiElement(:)(':')(490,491)
                              PsiElement(identifier)('Request')(491,498)
                      PsiWhiteSpace(' ')(498,499)
                      PsiElement(identifier)('req')(499,502)
                  PsiElement(,)(',')(502,503)
                  PsiWhiteSpace(' ')(503,504)
                  PARAMETER(504,515)
                    PARAMETER_WITH_TYPE(504,515)
                      SIMPLE_TYPE_NAME(504,510)
                        VALUE_TYPE_NAME(504,510)
                          PsiElement(string)('string')(504,510)
                      PsiWhiteSpace(' ')(510,511)
                      PsiElement(identifier)('name')(511,515)
            PsiElement())(')')(515,516)
            PsiWhiteSpace(' ')(516,517)
            CALLABLE_UNIT_BODY(517,1356)
              PsiElement({)('{')(517,518)
              PsiWhiteSpace('\n        ')(518,527)
              BLOCK(527,1350)
                ENDPOINT_DEFINITION(527,564)
                  PsiElement(endpoint)('endpoint')(527,535)
                  PsiWhiteSpace(' ')(535,536)
                  ENDPOINT_TYPE(536,558)
                    NAME_REFERENCE(536,558)
                      PACKAGE_REFERENCE(536,541)
                        PsiElement(identifier)('http')(536,540)
                        PsiElement(:)(':')(540,541)
                      PsiElement(identifier)('WebSocketListener')(541,558)
                  PsiWhiteSpace(' ')(558,559)
                  PsiElement(identifier)('wsEp')(559,563)
                  PsiElement(;)(';')(563,564)
                PsiWhiteSpace('\n        ')(564,573)
                STATEMENT(573,620)
                  VARIABLE_DEFINITION_STATEMENT(573,620)
                    SIMPLE_TYPE_NAME(573,584)
                      REFERENCE_TYPE_NAME(573,584)
                        BUILT_IN_REFERENCE_TYPE_NAME(573,584)
                          MAP_TYPE_NAME(573,584)
                            PsiElement(map)('map')(573,576)
                            PsiElement(<)('<')(576,577)
                            SIMPLE_TYPE_NAME(577,583)
                              VALUE_TYPE_NAME(577,583)
                                PsiElement(string)('string')(577,583)
                            PsiElement(>)('>')(583,584)
                    PsiWhiteSpace(' ')(584,585)
                    PsiElement(identifier)('queryParams')(585,596)
                    PsiWhiteSpace(' ')(596,597)
                    PsiElement(=)('=')(597,598)
                    PsiWhiteSpace(' ')(598,599)
                    VARIABLE_REFERENCE_EXPRESSION(599,619)
                      INVOCATION_REFERENCE(599,619)
                        SIMPLE_VARIABLE_REFERENCE(599,602)
                          NAME_REFERENCE(599,602)
                            PsiElement(identifier)('req')(599,602)
                        INVOCATION(602,619)
                          PsiElement(.)('.')(602,603)
                          ANY_IDENTIFIER_NAME(603,617)
                            PsiElement(identifier)('getQueryParams')(603,617)
                          PsiElement(()('(')(617,618)
                          PsiElement())(')')(618,619)
                    PsiElement(;)(';')(619,620)
                PsiWhiteSpace('\n        ')(620,629)
                PsiComment(LINE_COMMENT)('// Cancel handshake by sending a 400 status code if the age parameter is missing in the request.')(629,725)
                PsiWhiteSpace('\n        ')(725,734)
                STATEMENT(734,963)
                  IF_ELSE_STATEMENT(734,963)
                    IF_CLAUSE(734,963)
                      PsiElement(if)('if')(734,736)
                      PsiWhiteSpace(' ')(736,737)
                      BRACED_OR_TUPLE_EXPRESSION(737,765)
                        PsiElement(()('(')(737,738)
                        UNARY_EXPRESSION(738,764)
                          PsiElement(!)('!')(738,739)
                          VARIABLE_REFERENCE_EXPRESSION(739,764)
                            INVOCATION_REFERENCE(739,764)
                              SIMPLE_VARIABLE_REFERENCE(739,750)
                                NAME_REFERENCE(739,750)
                                  PsiElement(identifier)('queryParams')(739,750)
                              INVOCATION(750,764)
                                PsiElement(.)('.')(750,751)
                                ANY_IDENTIFIER_NAME(751,757)
                                  PsiElement(identifier)('hasKey')(751,757)
                                PsiElement(()('(')(757,758)
                                INVOCATION_ARG_LIST(758,763)
                                  INVOCATION_ARG(758,763)
                                    SIMPLE_LITERAL_EXPRESSION(758,763)
                                      SIMPLE_LITERAL(758,763)
                                        PsiElement(QUOTED_STRING_LITERAL)('"age"')(758,763)
                                PsiElement())(')')(763,764)
                        PsiElement())(')')(764,765)
                      PsiElement({)('{')(765,766)
                      PsiWhiteSpace('\n            ')(766,779)
                      BLOCK(779,953)
                        STATEMENT(779,935)
                          EXPRESSION_STMT(779,935)
                            MATCH_EXPR_EXPRESSION(779,934)
                              ACTION_INVOCATION_EXPRESSION(779,833)
                                ACTION_INVOCATION(779,833)
                                  NAME_REFERENCE(779,785)
                                    PsiElement(identifier)('caller')(779,785)
                                  PsiElement(->)('->')(785,787)
                                  FUNCTION_INVOCATION(787,833)
                                    FUNCTION_NAME_REFERENCE(787,809)
                                      ANY_IDENTIFIER_NAME(787,809)
                                        PsiElement(identifier)('cancelWebSocketUpgrade')(787,809)
                                    PsiElement(()('(')(809,810)
                                    INVOCATION_ARG_LIST(810,832)
                                      INVOCATION_ARG(810,813)
                                        SIMPLE_LITERAL_EXPRESSION(810,813)
                                          SIMPLE_LITERAL(810,813)
                                            INTEGER_LITERAL(810,813)
                                              PsiElement(DECIMAL_INTEGER_LITERAL)('400')(810,813)
                                      PsiElement(,)(',')(813,814)
                                      PsiWhiteSpace(' ')(814,815)
                                      INVOCATION_ARG(815,832)
                                        SIMPLE_LITERAL_EXPRESSION(815,832)
                                          SIMPLE_LITERAL(815,832)
                                            PsiElement(QUOTED_STRING_LITERAL)('"Age is required"')(815,832)
                                    PsiElement())(')')(832,833)
                              PsiWhiteSpace(' ')(833,834)
                              MATCH_EXPRESSION(834,934)
                                PsiElement(but)('but')(834,837)
                                PsiWhiteSpace(' ')(837,838)
                                PsiElement({)('{')(838,839)
                                PsiWhiteSpace('\n                ')(839,856)
                                MATCH_EXPRESSION_PATTERN_CLAUSE(856,920)
                                  SIMPLE_TYPE_NAME(856,861)
                                    REFERENCE_TYPE_NAME(856,861)
                                      USER_DEFINE_TYPE_NAME(856,861)
                                        NAME_REFERENCE(856,861)
                                          PsiElement(identifier)('error')(856,861)
                                  PsiWhiteSpace(' ')(861,862)
                                  PsiElement(identifier)('e')(862,863)
                                  PsiWhiteSpace(' ')(863,864)
                                  PsiElement(=>)('=>')(864,866)
                                  PsiWhiteSpace(' ')(866,867)
                                  VARIABLE_REFERENCE_EXPRESSION(867,920)
                                    FUNCTION_INVOCATION_REFERENCE(867,920)
                                      FUNCTION_INVOCATION(867,920)
                                        FUNCTION_NAME_REFERENCE(867,881)
                                          PACKAGE_REFERENCE(867,871)
                                            PsiElement(identifier)('log')(867,870)
                                            PsiElement(:)(':')(870,871)
                                          ANY_IDENTIFIER_NAME(871,881)
                                            PsiElement(identifier)('printError')(871,881)
                                        PsiElement(()('(')(881,882)
                                        INVOCATION_ARG_LIST(882,919)
                                          INVOCATION_ARG(882,910)
                                            SIMPLE_LITERAL_EXPRESSION(882,910)
                                              SIMPLE_LITERAL(882,910)
                                                PsiElement(QUOTED_STRING_LITERAL)('"Error cancelling handshake"')(882,910)
                                          PsiElement(,)(',')(910,911)
                                          PsiWhiteSpace(' ')(911,912)
                                          INVOCATION_ARG(912,919)
                                            NAMED_ARGS(912,919)
                                              PsiElement(identifier)('err')(912,915)
                                              PsiWhiteSpace(' ')(915,916)
                                              PsiElement(=)('=')(916,917)
                                              PsiWhiteSpace(' ')(917,918)
                                              VARIABLE_REFERENCE_EXPRESSION(918,919)
                                                SIMPLE_VARIABLE_REFERENCE(918,919)
                                                  NAME_REFERENCE(918,919)
                                                    PsiElement(identifier)('e')(918,919)
                                        PsiElement())(')')(919,920)
                                PsiWhiteSpace('\n            ')(920,933)
                                PsiElement(})('}')(933,934)
                            PsiElement(;)(';')(934,935)
                        PsiWhiteSpace('\n            ')(935,948)
                        STATEMENT(948,953)
                          DONE_STATEMENT(948,953)
                            PsiElement(done)('done')(948,952)
                            PsiElement(;)(';')(952,953)
                      PsiWhiteSpace('\n        ')(953,962)
                      PsiElement(})('}')(962,963)
                PsiWhiteSpace('\n        ')(963,972)
                STATEMENT(972,992)
                  VARIABLE_DEFINITION_STATEMENT(972,992)
                    SIMPLE_TYPE_NAME(972,983)
                      REFERENCE_TYPE_NAME(972,983)
                        BUILT_IN_REFERENCE_TYPE_NAME(972,983)
                          MAP_TYPE_NAME(972,983)
                            PsiElement(map)('map')(972,975)
                            PsiElement(<)('<')(975,976)
                            SIMPLE_TYPE_NAME(976,982)
                              VALUE_TYPE_NAME(976,982)
                                PsiElement(string)('string')(976,982)
                            PsiElement(>)('>')(982,983)
                    PsiWhiteSpace(' ')(983,984)
                    PsiElement(identifier)('headers')(984,991)
                    PsiElement(;)(';')(991,992)
                PsiWhiteSpace('\n        ')(992,1001)
                STATEMENT(1001,1048)
                  ASSIGNMENT_STATEMENT(1001,1048)
                    SIMPLE_VARIABLE_REFERENCE(1001,1005)
                      NAME_REFERENCE(1001,1005)
                        PsiElement(identifier)('wsEp')(1001,1005)
                    PsiWhiteSpace(' ')(1005,1006)
                    PsiElement(=)('=')(1006,1007)
                    PsiWhiteSpace(' ')(1007,1008)
                    ACTION_INVOCATION_EXPRESSION(1008,1047)
                      ACTION_INVOCATION(1008,1047)
                        NAME_REFERENCE(1008,1014)
                          PsiElement(identifier)('caller')(1008,1014)
                        PsiElement(->)('->')(1014,1016)
                        FUNCTION_INVOCATION(1016,1047)
                          FUNCTION_NAME_REFERENCE(1016,1038)
                            ANY_IDENTIFIER_NAME(1016,1038)
                              PsiElement(identifier)('acceptWebSocketUpgrade')(1016,1038)
                          PsiElement(()('(')(1038,1039)
                          INVOCATION_ARG_LIST(1039,1046)
                            INVOCATION_ARG(1039,1046)
                              VARIABLE_REFERENCE_EXPRESSION(1039,1046)
                                SIMPLE_VARIABLE_REFERENCE(1039,1046)
                                  NAME_REFERENCE(1039,1046)
                                    PsiElement(identifier)('headers')(1039,1046)
                          PsiElement())(')')(1046,1047)
                    PsiElement(;)(';')(1047,1048)
                PsiWhiteSpace('\n        ')(1048,1057)
                STATEMENT(1057,1086)
                  ASSIGNMENT_STATEMENT(1057,1086)
                    MAP_ARRAY_VARIABLE_REFERENCE(1057,1078)
                      FIELD_VARIABLE_REFERENCE(1057,1072)
                        SIMPLE_VARIABLE_REFERENCE(1057,1061)
                          NAME_REFERENCE(1057,1061)
                            PsiElement(identifier)('wsEp')(1057,1061)
                        FIELD(1061,1072)
                          PsiElement(.)('.')(1061,1062)
                          PsiElement(identifier)('attributes')(1062,1072)
                      INDEX(1072,1078)
                        PsiElement([)('[')(1072,1073)
                        VARIABLE_REFERENCE_EXPRESSION(1073,1077)
                          SIMPLE_VARIABLE_REFERENCE(1073,1077)
                            NAME_REFERENCE(1073,1077)
                              PsiElement(identifier)('NAME')(1073,1077)
                        PsiElement(])(']')(1077,1078)
                    PsiWhiteSpace(' ')(1078,1079)
                    PsiElement(=)('=')(1079,1080)
                    PsiWhiteSpace(' ')(1080,1081)
                    VARIABLE_REFERENCE_EXPRESSION(1081,1085)
                      SIMPLE_VARIABLE_REFERENCE(1081,1085)
                        NAME_REFERENCE(1081,1085)
                          PsiElement(identifier)('name')(1081,1085)
                    PsiElement(;)(';')(1085,1086)
                PsiWhiteSpace('\n        ')(1086,1095)
                STATEMENT(1095,1137)
                  ASSIGNMENT_STATEMENT(1095,1137)
                    MAP_ARRAY_VARIABLE_REFERENCE(1095,1115)
                      FIELD_VARIABLE_REFERENCE(1095,1110)
                        SIMPLE_VARIABLE_REFERENCE(1095,1099)
                          NAME_REFERENCE(1095,1099)
                            PsiElement(identifier)('wsEp')(1095,1099)
                        FIELD(1099,1110)
                          PsiElement(.)('.')(1099,1100)
                          PsiElement(identifier)('attributes')(1100,1110)
                      INDEX(1110,1115)
                        PsiElement([)('[')(1110,1111)
                        VARIABLE_REFERENCE_EXPRESSION(1111,1114)
                          SIMPLE_VARIABLE_REFERENCE(1111,1114)
                            NAME_REFERENCE(1111,1114)
                              PsiElement(identifier)('AGE')(1111,1114)
                        PsiElement(])(']')(1114,1115)
                    PsiWhiteSpace(' ')(1115,1116)
                    PsiElement(=)('=')(1116,1117)
                    PsiWhiteSpace(' ')(1117,1118)
                    VARIABLE_REFERENCE_EXPRESSION(1118,1136)
                      MAP_ARRAY_VARIABLE_REFERENCE(1118,1136)
                        SIMPLE_VARIABLE_REFERENCE(1118,1129)
                          NAME_REFERENCE(1118,1129)
                            PsiElement(identifier)('queryParams')(1118,1129)
                        INDEX(1129,1136)
                          PsiElement([)('[')(1129,1130)
                          SIMPLE_LITERAL_EXPRESSION(1130,1135)
                            SIMPLE_LITERAL(1130,1135)
                              PsiElement(QUOTED_STRING_LITERAL)('"age"')(1130,1135)
                          PsiElement(])(']')(1135,1136)
                    PsiElement(;)(';')(1136,1137)
                PsiWhiteSpace('\n        ')(1137,1146)
                STATEMENT(1146,1233)
                  VARIABLE_DEFINITION_STATEMENT(1146,1233)
                    SIMPLE_TYPE_NAME(1146,1152)
                      VALUE_TYPE_NAME(1146,1152)
                        PsiElement(string)('string')(1146,1152)
                    PsiWhiteSpace(' ')(1152,1153)
                    PsiElement(identifier)('msg')(1153,1156)
                    PsiWhiteSpace(' ')(1156,1157)
                    PsiElement(=)('=')(1157,1158)
                    PsiWhiteSpace('\n            ')(1158,1171)
                    BINARY_ADD_SUB_EXPRESSION(1171,1232)
                      BINARY_ADD_SUB_EXPRESSION(1171,1183)
                        SIMPLE_LITERAL_EXPRESSION(1171,1176)
                          SIMPLE_LITERAL(1171,1176)
                            PsiElement(QUOTED_STRING_LITERAL)('"Hi "')(1171,1176)
                        PsiWhiteSpace(' ')(1176,1177)
                        PsiElement(+)('+')(1177,1178)
                        PsiWhiteSpace(' ')(1178,1179)
                        VARIABLE_REFERENCE_EXPRESSION(1179,1183)
                          SIMPLE_VARIABLE_REFERENCE(1179,1183)
                            NAME_REFERENCE(1179,1183)
                              PsiElement(identifier)('name')(1179,1183)
                      PsiWhiteSpace(' ')(1183,1184)
                      PsiElement(+)('+')(1184,1185)
                      PsiWhiteSpace(' ')(1185,1186)
                      SIMPLE_LITERAL_EXPRESSION(1186,1232)
                        SIMPLE_LITERAL(1186,1232)
                          PsiElement(QUOTED_STRING_LITERAL)('"! You have succesfully connected to the chat"')(1186,1232)
                    PsiElement(;)(';')(1232,1233)
                PsiWhiteSpace('\n        ')(1233,1242)
                STATEMENT(1242,1350)
                  EXPRESSION_STMT(1242,1350)
                    MATCH_EXPR_EXPRESSION(1242,1349)
                      ACTION_INVOCATION_EXPRESSION(1242,1261)
                        ACTION_INVOCATION(1242,1261)
                          NAME_REFERENCE(1242,1246)
                            PsiElement(identifier)('wsEp')(1242,1246)
                          PsiElement(->)('->')(1246,1248)
                          FUNCTION_INVOCATION(1248,1261)
                            FUNCTION_NAME_REFERENCE(1248,1256)
                              ANY_IDENTIFIER_NAME(1248,1256)
                                PsiElement(identifier)('pushText')(1248,1256)
                            PsiElement(()('(')(1256,1257)
                            INVOCATION_ARG_LIST(1257,1260)
                              INVOCATION_ARG(1257,1260)
                                VARIABLE_REFERENCE_EXPRESSION(1257,1260)
                                  SIMPLE_VARIABLE_REFERENCE(1257,1260)
                                    NAME_REFERENCE(1257,1260)
                                      PsiElement(identifier)('msg')(1257,1260)
                            PsiElement())(')')(1260,1261)
                      PsiWhiteSpace(' ')(1261,1262)
                      MATCH_EXPRESSION(1262,1349)
                        PsiElement(but)('but')(1262,1265)
                        PsiWhiteSpace(' ')(1265,1266)
                        PsiElement({)('{')(1266,1267)
                        PsiWhiteSpace('\n            ')(1267,1280)
                        MATCH_EXPRESSION_PATTERN_CLAUSE(1280,1339)
                          SIMPLE_TYPE_NAME(1280,1285)
                            REFERENCE_TYPE_NAME(1280,1285)
                              USER_DEFINE_TYPE_NAME(1280,1285)
                                NAME_REFERENCE(1280,1285)
                                  PsiElement(identifier)('error')(1280,1285)
                          PsiWhiteSpace(' ')(1285,1286)
                          PsiElement(identifier)('e')(1286,1287)
                          PsiWhiteSpace(' ')(1287,1288)
                          PsiElement(=>)('=>')(1288,1290)
                          PsiWhiteSpace(' ')(1290,1291)
                          VARIABLE_REFERENCE_EXPRESSION(1291,1339)
                            FUNCTION_INVOCATION_REFERENCE(1291,1339)
                              FUNCTION_INVOCATION(1291,1339)
                                FUNCTION_NAME_REFERENCE(1291,1305)
                                  PACKAGE_REFERENCE(1291,1295)
                                    PsiElement(identifier)('log')(1291,1294)
                                    PsiElement(:)(':')(1294,1295)
                                  ANY_IDENTIFIER_NAME(1295,1305)
                                    PsiElement(identifier)('printError')(1295,1305)
                                PsiElement(()('(')(1305,1306)
                                INVOCATION_ARG_LIST(1306,1338)
                                  INVOCATION_ARG(1306,1329)
                                    SIMPLE_LITERAL_EXPRESSION(1306,1329)
                                      SIMPLE_LITERAL(1306,1329)
                                        PsiElement(QUOTED_STRING_LITERAL)('"Error sending message"')(1306,1329)
                                  PsiElement(,)(',')(1329,1330)
                                  PsiWhiteSpace(' ')(1330,1331)
                                  INVOCATION_ARG(1331,1338)
                                    NAMED_ARGS(1331,1338)
                                      PsiElement(identifier)('err')(1331,1334)
                                      PsiWhiteSpace(' ')(1334,1335)
                                      PsiElement(=)('=')(1335,1336)
                                      PsiWhiteSpace(' ')(1336,1337)
                                      VARIABLE_REFERENCE_EXPRESSION(1337,1338)
                                        SIMPLE_VARIABLE_REFERENCE(1337,1338)
                                          NAME_REFERENCE(1337,1338)
                                            PsiElement(identifier)('e')(1337,1338)
                                PsiElement())(')')(1338,1339)
                        PsiWhiteSpace('\n        ')(1339,1348)
                        PsiElement(})('}')(1348,1349)
                    PsiElement(;)(';')(1349,1350)
              PsiWhiteSpace('\n    ')(1350,1355)
              PsiElement(})('}')(1355,1356)
          PsiWhiteSpace('\n')(1356,1357)
          PsiElement(})('}')(1357,1358)
  PsiWhiteSpace('\n\n')(1358,1360)
  PsiComment(LINE_COMMENT)('// Stores the connection IDs of users who join the chat.')(1360,1416)
  PsiWhiteSpace('\n')(1416,1417)
  DEFINITION(1417,1460)
    GLOBAL_VARIABLE_DEFINITION(1417,1460)
      SIMPLE_TYPE_NAME(1417,1444)
        REFERENCE_TYPE_NAME(1417,1444)
          BUILT_IN_REFERENCE_TYPE_NAME(1417,1444)
            MAP_TYPE_NAME(1417,1444)
              PsiElement(map)('map')(1417,1420)
              PsiElement(<)('<')(1420,1421)
              SIMPLE_TYPE_NAME(1421,1443)
                REFERENCE_TYPE_NAME(1421,1443)
                  USER_DEFINE_TYPE_NAME(1421,1443)
                    NAME_REFERENCE(1421,1443)
                      PACKAGE_REFERENCE(1421,1426)
                        PsiElement(identifier)('http')(1421,1425)
                        PsiElement(:)(':')(1425,1426)
                      PsiElement(identifier)('WebSocketListener')(1426,1443)
              PsiElement(>)('>')(1443,1444)
      PsiWhiteSpace(' ')(1444,1445)
      PsiElement(identifier)('connectionsMap')(1445,1459)
      PsiElement(;)(';')(1459,1460)
  PsiWhiteSpace('\n\n')(1460,1462)
  DEFINITION(1462,2429)
    SERVICE_DEFINITION(1462,2429)
      PsiElement(service)('service')(1462,1469)
      PsiElement(<)('<')(1469,1470)
      NAME_REFERENCE(1470,1491)
        PACKAGE_REFERENCE(1470,1475)
          PsiElement(identifier)('http')(1470,1474)
          PsiElement(:)(':')(1474,1475)
        PsiElement(identifier)('WebSocketService')(1475,1491)
      PsiElement(>)('>')(1491,1492)
      PsiWhiteSpace(' ')(1492,1493)
      PsiElement(identifier)('chatApp')(1493,1500)
      PsiWhiteSpace(' ')(1500,1501)
      SERVICE_BODY(1501,2429)
        PsiElement({)('{')(1501,1502)
        PsiWhiteSpace('\n\n    ')(1502,1508)
        PsiComment(LINE_COMMENT)('// Store the attributes of the user, such as username and age, once the user connects to the chat client, and')(1508,1617)
        PsiWhiteSpace('\n    ')(1617,1622)
        PsiComment(LINE_COMMENT)('// broadcast that the user has joined the chat.')(1622,1669)
        PsiWhiteSpace('\n    ')(1669,1674)
        RESOURCE_DEFINITION(1674,1927)
          PsiElement(identifier)('onOpen')(1674,1680)
          PsiElement(()('(')(1680,1681)
          RESOURCE_PARAMETER_LIST(1681,1696)
            ENDPOINT_PARAMETER(1681,1696)
              PsiElement(endpoint)('endpoint')(1681,1689)
              PsiWhiteSpace(' ')(1689,1690)
              PsiElement(identifier)('caller')(1690,1696)
          PsiElement())(')')(1696,1697)
          PsiWhiteSpace(' ')(1697,1698)
          CALLABLE_UNIT_BODY(1698,1927)
            PsiElement({)('{')(1698,1699)
            PsiWhiteSpace('\n        ')(1699,1708)
            BLOCK(1708,1921)
              STATEMENT(1708,1719)
                VARIABLE_DEFINITION_STATEMENT(1708,1719)
                  SIMPLE_TYPE_NAME(1708,1714)
                    VALUE_TYPE_NAME(1708,1714)
                      PsiElement(string)('string')(1708,1714)
                  PsiWhiteSpace(' ')(1714,1715)
                  PsiElement(identifier)('msg')(1715,1718)
                  PsiElement(;)(';')(1718,1719)
              PsiWhiteSpace('\n        ')(1719,1728)
              STATEMENT(1728,1853)
                ASSIGNMENT_STATEMENT(1728,1853)
                  SIMPLE_VARIABLE_REFERENCE(1728,1731)
                    NAME_REFERENCE(1728,1731)
                      PsiElement(identifier)('msg')(1728,1731)
                  PsiWhiteSpace(' ')(1731,1732)
                  PsiElement(=)('=')(1732,1733)
                  PsiWhiteSpace(' ')(1733,1734)
                  BINARY_ADD_SUB_EXPRESSION(1734,1852)
                    BINARY_ADD_SUB_EXPRESSION(1734,1829)
                      BINARY_ADD_SUB_EXPRESSION(1734,1778)
                        VARIABLE_REFERENCE_EXPRESSION(1734,1763)
                          FUNCTION_INVOCATION_REFERENCE(1734,1763)
                            FUNCTION_INVOCATION(1734,1763)
                              FUNCTION_NAME_REFERENCE(1734,1749)
                                ANY_IDENTIFIER_NAME(1734,1749)
                                  PsiElement(identifier)('getAttributeStr')(1734,1749)
                              PsiElement(()('(')(1749,1750)
                              INVOCATION_ARG_LIST(1750,1762)
                                INVOCATION_ARG(1750,1756)
                                  VARIABLE_REFERENCE_EXPRESSION(1750,1756)
                                    SIMPLE_VARIABLE_REFERENCE(1750,1756)
                                      NAME_REFERENCE(1750,1756)
                                        PsiElement(identifier)('caller')(1750,1756)
                                PsiElement(,)(',')(1756,1757)
                                PsiWhiteSpace(' ')(1757,1758)
                                INVOCATION_ARG(1758,1762)
                                  VARIABLE_REFERENCE_EXPRESSION(1758,1762)
                                    SIMPLE_VARIABLE_REFERENCE(1758,1762)
                                      NAME_REFERENCE(1758,1762)
                                        PsiElement(identifier)('NAME')(1758,1762)
                              PsiElement())(')')(1762,1763)
                        PsiWhiteSpace(' ')(1763,1764)
                        PsiElement(+)('+')(1764,1765)
                        PsiWhiteSpace(' ')(1765,1766)
                        SIMPLE_LITERAL_EXPRESSION(1766,1778)
                          SIMPLE_LITERAL(1766,1778)
                            PsiElement(QUOTED_STRING_LITERAL)('" with age "')(1766,1778)
                      PsiWhiteSpace('\n                    ')(1778,1799)
                      PsiElement(+)('+')(1799,1800)
                      PsiWhiteSpace(' ')(1800,1801)
                      VARIABLE_REFERENCE_EXPRESSION(1801,1829)
                        FUNCTION_INVOCATION_REFERENCE(1801,1829)
                          FUNCTION_INVOCATION(1801,1829)
                            FUNCTION_NAME_REFERENCE(1801,1816)
                              ANY_IDENTIFIER_NAME(1801,1816)
                                PsiElement(identifier)('getAttributeStr')(1801,1816)
                            PsiElement(()('(')(1816,1817)
                            INVOCATION_ARG_LIST(1817,1828)
                              INVOCATION_ARG(1817,1823)
                                VARIABLE_REFERENCE_EXPRESSION(1817,1823)
                                  SIMPLE_VARIABLE_REFERENCE(1817,1823)
                                    NAME_REFERENCE(1817,1823)
                                      PsiElement(identifier)('caller')(1817,1823)
                              PsiElement(,)(',')(1823,1824)
                              PsiWhiteSpace(' ')(1824,1825)
                              INVOCATION_ARG(1825,1828)
                                VARIABLE_REFERENCE_EXPRESSION(1825,1828)
                                  SIMPLE_VARIABLE_REFERENCE(1825,1828)
                                    NAME_REFERENCE(1825,1828)
                                      PsiElement(identifier)('AGE')(1825,1828)
                            PsiElement())(')')(1828,1829)
                    PsiWhiteSpace(' ')(1829,1830)
                    PsiElement(+)('+')(1830,1831)
                    PsiWhiteSpace(' ')(1831,1832)
                    SIMPLE_LITERAL_EXPRESSION(1832,1852)
                      SIMPLE_LITERAL(1832,1852)
                        PsiElement(QUOTED_STRING_LITERAL)('" connected to chat"')(1832,1852)
                  PsiElement(;)(';')(1852,1853)
              PsiWhiteSpace('\n        ')(1853,1862)
              STATEMENT(1862,1877)
                EXPRESSION_STMT(1862,1877)
                  VARIABLE_REFERENCE_EXPRESSION(1862,1876)
                    FUNCTION_INVOCATION_REFERENCE(1862,1876)
                      FUNCTION_INVOCATION(1862,1876)
                        FUNCTION_NAME_REFERENCE(1862,1871)
                          ANY_IDENTIFIER_NAME(1862,1871)
                            PsiElement(identifier)('broadcast')(1862,1871)
                        PsiElement(()('(')(1871,1872)
                        INVOCATION_ARG_LIST(1872,1875)
                          INVOCATION_ARG(1872,1875)
                            VARIABLE_REFERENCE_EXPRESSION(1872,1875)
                              SIMPLE_VARIABLE_REFERENCE(1872,1875)
                                NAME_REFERENCE(1872,1875)
                                  PsiElement(identifier)('msg')(1872,1875)
                        PsiElement())(')')(1875,1876)
                  PsiElement(;)(';')(1876,1877)
              PsiWhiteSpace('\n        ')(1877,1886)
              STATEMENT(1886,1921)
                ASSIGNMENT_STATEMENT(1886,1921)
                  MAP_ARRAY_VARIABLE_REFERENCE(1886,1911)
                    SIMPLE_VARIABLE_REFERENCE(1886,1900)
                      NAME_REFERENCE(1886,1900)
                        PsiElement(identifier)('connectionsMap')(1886,1900)
                    INDEX(1900,1911)
                      PsiElement([)('[')(1900,1901)
                      VARIABLE_REFERENCE_EXPRESSION(1901,1910)
                        FIELD_VARIABLE_REFERENCE(1901,1910)
                          SIMPLE_VARIABLE_REFERENCE(1901,1907)
                            NAME_REFERENCE(1901,1907)
                              PsiElement(identifier)('caller')(1901,1907)
                          FIELD(1907,1910)
                            PsiElement(.)('.')(1907,1908)
                            PsiElement(identifier)('id')(1908,1910)
                      PsiElement(])(']')(1910,1911)
                  PsiWhiteSpace(' ')(1911,1912)
                  PsiElement(=)('=')(1912,1913)
                  PsiWhiteSpace(' ')(1913,1914)
                  VARIABLE_REFERENCE_EXPRESSION(1914,1920)
                    SIMPLE_VARIABLE_REFERENCE(1914,1920)
                      NAME_REFERENCE(1914,1920)
                        PsiElement(identifier)('caller')(1914,1920)
                  PsiElement(;)(';')(1920,1921)
            PsiWhiteSpace('\n    ')(1921,1926)
            PsiElement(})('}')(1926,1927)
        PsiWhiteSpace('\n\n    ')(1927,1933)
        PsiComment(LINE_COMMENT)('// Broadcast the messages sent by a user.')(1933,1974)
        PsiWhiteSpace('\n    ')(1974,1979)
        RESOURCE_DEFINITION(1979,2141)
          PsiElement(identifier)('onText')(1979,1985)
          PsiElement(()('(')(1985,1986)
          RESOURCE_PARAMETER_LIST(1986,2014)
            ENDPOINT_PARAMETER(1986,2014)
              PsiElement(endpoint)('endpoint')(1986,1994)
              PsiWhiteSpace(' ')(1994,1995)
              PsiElement(identifier)('caller')(1995,2001)
              PsiElement(,)(',')(2001,2002)
              PsiWhiteSpace(' ')(2002,2003)
              PARAMETER_LIST(2003,2014)
                PARAMETER(2003,2014)
                  PARAMETER_WITH_TYPE(2003,2014)
                    SIMPLE_TYPE_NAME(2003,2009)
                      VALUE_TYPE_NAME(2003,2009)
                        PsiElement(string)('string')(2003,2009)
                    PsiWhiteSpace(' ')(2009,2010)
                    PsiElement(identifier)('text')(2010,2014)
          PsiElement())(')')(2014,2015)
          PsiWhiteSpace(' ')(2015,2016)
          CALLABLE_UNIT_BODY(2016,2141)
            PsiElement({)('{')(2016,2017)
            PsiWhiteSpace('\n        ')(2017,2026)
            BLOCK(2026,2135)
              STATEMENT(2026,2083)
                VARIABLE_DEFINITION_STATEMENT(2026,2083)
                  SIMPLE_TYPE_NAME(2026,2032)
                    VALUE_TYPE_NAME(2026,2032)
                      PsiElement(string)('string')(2026,2032)
                  PsiWhiteSpace(' ')(2032,2033)
                  PsiElement(identifier)('msg')(2033,2036)
                  PsiWhiteSpace(' ')(2036,2037)
                  PsiElement(=)('=')(2037,2038)
                  PsiWhiteSpace(' ')(2038,2039)
                  BINARY_ADD_SUB_EXPRESSION(2039,2082)
                    BINARY_ADD_SUB_EXPRESSION(2039,2075)
                      VARIABLE_REFERENCE_EXPRESSION(2039,2068)
                        FUNCTION_INVOCATION_REFERENCE(2039,2068)
                          FUNCTION_INVOCATION(2039,2068)
                            FUNCTION_NAME_REFERENCE(2039,2054)
                              ANY_IDENTIFIER_NAME(2039,2054)
                                PsiElement(identifier)('getAttributeStr')(2039,2054)
                            PsiElement(()('(')(2054,2055)
                            INVOCATION_ARG_LIST(2055,2067)
                              INVOCATION_ARG(2055,2061)
                                VARIABLE_REFERENCE_EXPRESSION(2055,2061)
                                  SIMPLE_VARIABLE_REFERENCE(2055,2061)
                                    NAME_REFERENCE(2055,2061)
                                      PsiElement(identifier)('caller')(2055,2061)
                              PsiElement(,)(',')(2061,2062)
                              PsiWhiteSpace(' ')(2062,2063)
                              INVOCATION_ARG(2063,2067)
                                VARIABLE_REFERENCE_EXPRESSION(2063,2067)
                                  SIMPLE_VARIABLE_REFERENCE(2063,2067)
                                    NAME_REFERENCE(2063,2067)
                                      PsiElement(identifier)('NAME')(2063,2067)
                            PsiElement())(')')(2067,2068)
                      PsiWhiteSpace(' ')(2068,2069)
                      PsiElement(+)('+')(2069,2070)
                      PsiWhiteSpace(' ')(2070,2071)
                      SIMPLE_LITERAL_EXPRESSION(2071,2075)
                        SIMPLE_LITERAL(2071,2075)
                          PsiElement(QUOTED_STRING_LITERAL)('": "')(2071,2075)
                    PsiWhiteSpace(' ')(2075,2076)
                    PsiElement(+)('+')(2076,2077)
                    PsiWhiteSpace(' ')(2077,2078)
                    VARIABLE_REFERENCE_EXPRESSION(2078,2082)
                      SIMPLE_VARIABLE_REFERENCE(2078,2082)
                        NAME_REFERENCE(2078,2082)
                          PsiElement(identifier)('text')(2078,2082)
                  PsiElement(;)(';')(2082,2083)
              PsiWhiteSpace('\n        ')(2083,2092)
              STATEMENT(2092,2111)
                EXPRESSION_STMT(2092,2111)
                  VARIABLE_REFERENCE_EXPRESSION(2092,2110)
                    FUNCTION_INVOCATION_REFERENCE(2092,2110)
                      FUNCTION_INVOCATION(2092,2110)
                        FUNCTION_NAME_REFERENCE(2092,2105)
                          PACKAGE_REFERENCE(2092,2096)
                            PsiElement(identifier)('log')(2092,2095)
                            PsiElement(:)(':')(2095,2096)
                          ANY_IDENTIFIER_NAME(2096,2105)
                            PsiElement(identifier)('printInfo')(2096,2105)
                        PsiElement(()('(')(2105,2106)
                        INVOCATION_ARG_LIST(2106,2109)
                          INVOCATION_ARG(2106,2109)
                            VARIABLE_REFERENCE_EXPRESSION(2106,2109)
                              SIMPLE_VARIABLE_REFERENCE(2106,2109)
                                NAME_REFERENCE(2106,2109)
                                  PsiElement(identifier)('msg')(2106,2109)
                        PsiElement())(')')(2109,2110)
                  PsiElement(;)(';')(2110,2111)
              PsiWhiteSpace('\n        ')(2111,2120)
              STATEMENT(2120,2135)
                EXPRESSION_STMT(2120,2135)
                  VARIABLE_REFERENCE_EXPRESSION(2120,2134)
                    FUNCTION_INVOCATION_REFERENCE(2120,2134)
                      FUNCTION_INVOCATION(2120,2134)
                        FUNCTION_NAME_REFERENCE(2120,2129)
                          ANY_IDENTIFIER_NAME(2120,2129)
                            PsiElement(identifier)('broadcast')(2120,2129)
                        PsiElement(()('(')(2129,2130)
                        INVOCATION_ARG_LIST(2130,2133)
                          INVOCATION_ARG(2130,2133)
                            VARIABLE_REFERENCE_EXPRESSION(2130,2133)
                              SIMPLE_VARIABLE_REFERENCE(2130,2133)
                                NAME_REFERENCE(2130,2133)
                                  PsiElement(identifier)('msg')(2130,2133)
                        PsiElement())(')')(2133,2134)
                  PsiElement(;)(';')(2134,2135)
            PsiWhiteSpace('\n    ')(2135,2140)
            PsiElement(})('}')(2140,2141)
        PsiWhiteSpace('\n\n    ')(2141,2147)
        PsiComment(LINE_COMMENT)('// Broadcast that a user has left the chat once a user leaves the chat.')(2147,2218)
        PsiWhiteSpace('\n    ')(2218,2223)
        RESOURCE_DEFINITION(2223,2427)
          PsiElement(identifier)('onClose')(2223,2230)
          PsiElement(()('(')(2230,2231)
          RESOURCE_PARAMETER_LIST(2231,2277)
            ENDPOINT_PARAMETER(2231,2277)
              PsiElement(endpoint)('endpoint')(2231,2239)
              PsiWhiteSpace(' ')(2239,2240)
              PsiElement(identifier)('caller')(2240,2246)
              PsiElement(,)(',')(2246,2247)
              PsiWhiteSpace(' ')(2247,2248)
              PARAMETER_LIST(2248,2277)
                PARAMETER(2248,2262)
                  PARAMETER_WITH_TYPE(2248,2262)
                    SIMPLE_TYPE_NAME(2248,2251)
                      VALUE_TYPE_NAME(2248,2251)
                        PsiElement(int)('int')(2248,2251)
                    PsiWhiteSpace(' ')(2251,2252)
                    PsiElement(identifier)('statusCode')(2252,2262)
                PsiElement(,)(',')(2262,2263)
                PsiWhiteSpace(' ')(2263,2264)
                PARAMETER(2264,2277)
                  PARAMETER_WITH_TYPE(2264,2277)
                    SIMPLE_TYPE_NAME(2264,2270)
                      VALUE_TYPE_NAME(2264,2270)
                        PsiElement(string)('string')(2264,2270)
                    PsiWhiteSpace(' ')(2270,2271)
                    PsiElement(identifier)('reason')(2271,2277)
          PsiElement())(')')(2277,2278)
          PsiWhiteSpace(' ')(2278,2279)
          CALLABLE_UNIT_BODY(2279,2427)
            PsiElement({)('{')(2279,2280)
            PsiWhiteSpace('\n        ')(2280,2289)
            BLOCK(2289,2421)
              STATEMENT(2289,2326)
                ASSIGNMENT_STATEMENT(2289,2326)
                  SIMPLE_VARIABLE_REFERENCE(2289,2290)
                    NAME_REFERENCE(2289,2290)
                      PsiElement(identifier)('_')(2289,2290)
                  PsiWhiteSpace(' ')(2290,2291)
                  PsiElement(=)('=')(2291,2292)
                  PsiWhiteSpace(' ')(2292,2293)
                  VARIABLE_REFERENCE_EXPRESSION(2293,2325)
                    INVOCATION_REFERENCE(2293,2325)
                      SIMPLE_VARIABLE_REFERENCE(2293,2307)
                        NAME_REFERENCE(2293,2307)
                          PsiElement(identifier)('connectionsMap')(2293,2307)
                      INVOCATION(2307,2325)
                        PsiElement(.)('.')(2307,2308)
                        ANY_IDENTIFIER_NAME(2308,2314)
                          PsiElement(identifier)('remove')(2308,2314)
                        PsiElement(()('(')(2314,2315)
                        INVOCATION_ARG_LIST(2315,2324)
                          INVOCATION_ARG(2315,2324)
                            VARIABLE_REFERENCE_EXPRESSION(2315,2324)
                              FIELD_VARIABLE_REFERENCE(2315,2324)
                                SIMPLE_VARIABLE_REFERENCE(2315,2321)
                                  NAME_REFERENCE(2315,2321)
                                    PsiElement(identifier)('caller')(2315,2321)
                                FIELD(2321,2324)
                                  PsiElement(.)('.')(2321,2322)
                                  PsiElement(identifier)('id')(2322,2324)
                        PsiElement())(')')(2324,2325)
                  PsiElement(;)(';')(2325,2326)
              PsiWhiteSpace('\n        ')(2326,2335)
              STATEMENT(2335,2397)
                VARIABLE_DEFINITION_STATEMENT(2335,2397)
                  SIMPLE_TYPE_NAME(2335,2341)
                    VALUE_TYPE_NAME(2335,2341)
                      PsiElement(string)('string')(2335,2341)
                  PsiWhiteSpace(' ')(2341,2342)
                  PsiElement(identifier)('msg')(2342,2345)
                  PsiWhiteSpace(' ')(2345,2346)
                  PsiElement(=)('=')(2346,2347)
                  PsiWhiteSpace(' ')(2347,2348)
                  BINARY_ADD_SUB_EXPRESSION(2348,2396)
                    VARIABLE_REFERENCE_EXPRESSION(2348,2377)
                      FUNCTION_INVOCATION_REFERENCE(2348,2377)
                        FUNCTION_INVOCATION(2348,2377)
                          FUNCTION_NAME_REFERENCE(2348,2363)
                            ANY_IDENTIFIER_NAME(2348,2363)
                              PsiElement(identifier)('getAttributeStr')(2348,2363)
                          PsiElement(()('(')(2363,2364)
                          INVOCATION_ARG_LIST(2364,2376)
                            INVOCATION_ARG(2364,2370)
                              VARIABLE_REFERENCE_EXPRESSION(2364,2370)
                                SIMPLE_VARIABLE_REFERENCE(2364,2370)
                                  NAME_REFERENCE(2364,2370)
                                    PsiElement(identifier)('caller')(2364,2370)
                            PsiElement(,)(',')(2370,2371)
                            PsiWhiteSpace(' ')(2371,2372)
                            INVOCATION_ARG(2372,2376)
                              VARIABLE_REFERENCE_EXPRESSION(2372,2376)
                                SIMPLE_VARIABLE_REFERENCE(2372,2376)
                                  NAME_REFERENCE(2372,2376)
                                    PsiElement(identifier)('NAME')(2372,2376)
                          PsiElement())(')')(2376,2377)
                    PsiWhiteSpace(' ')(2377,2378)
                    PsiElement(+)('+')(2378,2379)
                    PsiWhiteSpace(' ')(2379,2380)
                    SIMPLE_LITERAL_EXPRESSION(2380,2396)
                      SIMPLE_LITERAL(2380,2396)
                        PsiElement(QUOTED_STRING_LITERAL)('" left the chat"')(2380,2396)
                  PsiElement(;)(';')(2396,2397)
              PsiWhiteSpace('\n        ')(2397,2406)
              STATEMENT(2406,2421)
                EXPRESSION_STMT(2406,2421)
                  VARIABLE_REFERENCE_EXPRESSION(2406,2420)
                    FUNCTION_INVOCATION_REFERENCE(2406,2420)
                      FUNCTION_INVOCATION(2406,2420)
                        FUNCTION_NAME_REFERENCE(2406,2415)
                          ANY_IDENTIFIER_NAME(2406,2415)
                            PsiElement(identifier)('broadcast')(2406,2415)
                        PsiElement(()('(')(2415,2416)
                        INVOCATION_ARG_LIST(2416,2419)
                          INVOCATION_ARG(2416,2419)
                            VARIABLE_REFERENCE_EXPRESSION(2416,2419)
                              SIMPLE_VARIABLE_REFERENCE(2416,2419)
                                NAME_REFERENCE(2416,2419)
                                  PsiElement(identifier)('msg')(2416,2419)
                        PsiElement())(')')(2419,2420)
                  PsiElement(;)(';')(2420,2421)
            PsiWhiteSpace('\n    ')(2421,2426)
            PsiElement(})('}')(2426,2427)
        PsiWhiteSpace('\n')(2427,2428)
        PsiElement(})('}')(2428,2429)
  PsiWhiteSpace('\n\n')(2429,2431)
  DEFINITION(2431,2686)
    FUNCTION_DEFINITION(2431,2686)
      PsiElement(function)('function')(2431,2439)
      PsiWhiteSpace(' ')(2439,2440)
      CALLABLE_UNIT_SIGNATURE(2440,2462)
        ANY_IDENTIFIER_NAME(2440,2449)
          PsiElement(identifier)('broadcast')(2440,2449)
        PsiElement(()('(')(2449,2450)
        FORMAL_PARAMETER_LIST(2450,2461)
          PARAMETER(2450,2461)
            PARAMETER_WITH_TYPE(2450,2461)
              SIMPLE_TYPE_NAME(2450,2456)
                VALUE_TYPE_NAME(2450,2456)
                  PsiElement(string)('string')(2450,2456)
              PsiWhiteSpace(' ')(2456,2457)
              PsiElement(identifier)('text')(2457,2461)
        PsiElement())(')')(2461,2462)
      PsiWhiteSpace(' ')(2462,2463)
      CALLABLE_UNIT_BODY(2463,2686)
        PsiElement({)('{')(2463,2464)
        PsiWhiteSpace('\n    ')(2464,2469)
        BLOCK(2469,2684)
          ENDPOINT_DEFINITION(2469,2504)
            PsiElement(endpoint)('endpoint')(2469,2477)
            PsiWhiteSpace(' ')(2477,2478)
            ENDPOINT_TYPE(2478,2500)
              NAME_REFERENCE(2478,2500)
                PACKAGE_REFERENCE(2478,2483)
                  PsiElement(identifier)('http')(2478,2482)
                  PsiElement(:)(':')(2482,2483)
                PsiElement(identifier)('WebSocketListener')(2483,2500)
            PsiWhiteSpace(' ')(2500,2501)
            PsiElement(identifier)('ep')(2501,2503)
            PsiElement(;)(';')(2503,2504)
          PsiWhiteSpace('\n    ')(2504,2509)
          STATEMENT(2509,2684)
            FOREACH_STATEMENT(2509,2684)
              PsiElement(foreach)('foreach')(2509,2516)
              PsiWhiteSpace(' ')(2516,2517)
              VARIABLE_REFERENCE_LIST(2517,2524)
                SIMPLE_VARIABLE_REFERENCE(2517,2519)
                  NAME_REFERENCE(2517,2519)
                    PsiElement(identifier)('id')(2517,2519)
                PsiElement(,)(',')(2519,2520)
                PsiWhiteSpace(' ')(2520,2521)
                SIMPLE_VARIABLE_REFERENCE(2521,2524)
                  NAME_REFERENCE(2521,2524)
                    PsiElement(identifier)('con')(2521,2524)
              PsiWhiteSpace(' ')(2524,2525)
              PsiElement(in)('in')(2525,2527)
              PsiWhiteSpace(' ')(2527,2528)
              VARIABLE_REFERENCE_EXPRESSION(2528,2542)
                SIMPLE_VARIABLE_REFERENCE(2528,2542)
                  NAME_REFERENCE(2528,2542)
                    PsiElement(identifier)('connectionsMap')(2528,2542)
              PsiWhiteSpace(' ')(2542,2543)
              PsiElement({)('{')(2543,2544)
              PsiWhiteSpace('\n        ')(2544,2553)
              BLOCK(2553,2678)
                STATEMENT(2553,2562)
                  ASSIGNMENT_STATEMENT(2553,2562)
                    SIMPLE_VARIABLE_REFERENCE(2553,2555)
                      NAME_REFERENCE(2553,2555)
                        PsiElement(identifier)('ep')(2553,2555)
                    PsiWhiteSpace(' ')(2555,2556)
                    PsiElement(=)('=')(2556,2557)
                    PsiWhiteSpace(' ')(2557,2558)
                    VARIABLE_REFERENCE_EXPRESSION(2558,2561)
                      SIMPLE_VARIABLE_REFERENCE(2558,2561)
                        NAME_REFERENCE(2558,2561)
                          PsiElement(identifier)('con')(2558,2561)
                    PsiElement(;)(';')(2561,2562)
                PsiWhiteSpace('\n        ')(2562,2571)
                STATEMENT(2571,2678)
                  EXPRESSION_STMT(2571,2678)
                    MATCH_EXPR_EXPRESSION(2571,2677)
                      ACTION_INVOCATION_EXPRESSION(2571,2589)
                        ACTION_INVOCATION(2571,2589)
                          NAME_REFERENCE(2571,2573)
                            PsiElement(identifier)('ep')(2571,2573)
                          PsiElement(->)('->')(2573,2575)
                          FUNCTION_INVOCATION(2575,2589)
                            FUNCTION_NAME_REFERENCE(2575,2583)
                              ANY_IDENTIFIER_NAME(2575,2583)
                                PsiElement(identifier)('pushText')(2575,2583)
                            PsiElement(()('(')(2583,2584)
                            INVOCATION_ARG_LIST(2584,2588)
                              INVOCATION_ARG(2584,2588)
                                VARIABLE_REFERENCE_EXPRESSION(2584,2588)
                                  SIMPLE_VARIABLE_REFERENCE(2584,2588)
                                    NAME_REFERENCE(2584,2588)
                                      PsiElement(identifier)('text')(2584,2588)
                            PsiElement())(')')(2588,2589)
                      PsiWhiteSpace(' ')(2589,2590)
                      MATCH_EXPRESSION(2590,2677)
                        PsiElement(but)('but')(2590,2593)
                        PsiWhiteSpace(' ')(2593,2594)
                        PsiElement({)('{')(2594,2595)
                        PsiWhiteSpace('\n            ')(2595,2608)
                        MATCH_EXPRESSION_PATTERN_CLAUSE(2608,2667)
                          SIMPLE_TYPE_NAME(2608,2613)
                            REFERENCE_TYPE_NAME(2608,2613)
                              USER_DEFINE_TYPE_NAME(2608,2613)
                                NAME_REFERENCE(2608,2613)
                                  PsiElement(identifier)('error')(2608,2613)
                          PsiWhiteSpace(' ')(2613,2614)
                          PsiElement(identifier)('e')(2614,2615)
                          PsiWhiteSpace(' ')(2615,2616)
                          PsiElement(=>)('=>')(2616,2618)
                          PsiWhiteSpace(' ')(2618,2619)
                          VARIABLE_REFERENCE_EXPRESSION(2619,2667)
                            FUNCTION_INVOCATION_REFERENCE(2619,2667)
                              FUNCTION_INVOCATION(2619,2667)
                                FUNCTION_NAME_REFERENCE(2619,2633)
                                  PACKAGE_REFERENCE(2619,2623)
                                    PsiElement(identifier)('log')(2619,2622)
                                    PsiElement(:)(':')(2622,2623)
                                  ANY_IDENTIFIER_NAME(2623,2633)
                                    PsiElement(identifier)('printError')(2623,2633)
                                PsiElement(()('(')(2633,2634)
                                INVOCATION_ARG_LIST(2634,2666)
                                  INVOCATION_ARG(2634,2657)
                                    SIMPLE_LITERAL_EXPRESSION(2634,2657)
                                      SIMPLE_LITERAL(2634,2657)
                                        PsiElement(QUOTED_STRING_LITERAL)('"Error sending message"')(2634,2657)
                                  PsiElement(,)(',')(2657,2658)
                                  PsiWhiteSpace(' ')(2658,2659)
                                  INVOCATION_ARG(2659,2666)
                                    NAMED_ARGS(2659,2666)
                                      PsiElement(identifier)('err')(2659,2662)
                                      PsiWhiteSpace(' ')(2662,2663)
                                      PsiElement(=)('=')(2663,2664)
                                      PsiWhiteSpace(' ')(2664,2665)
                                      VARIABLE_REFERENCE_EXPRESSION(2665,2666)
                                        SIMPLE_VARIABLE_REFERENCE(2665,2666)
                                          NAME_REFERENCE(2665,2666)
                                            PsiElement(identifier)('e')(2665,2666)
                                PsiElement())(')')(2666,2667)
                        PsiWhiteSpace('\n        ')(2667,2676)
                        PsiElement(})('}')(2676,2677)
                    PsiElement(;)(';')(2677,2678)
              PsiWhiteSpace('\n    ')(2678,2683)
              PsiElement(})('}')(2683,2684)
        PsiWhiteSpace('\n')(2684,2685)
        PsiElement(})('}')(2685,2686)
  PsiWhiteSpace('\n\n')(2686,2688)
  DEFINITION(2688,2845)
    FUNCTION_DEFINITION(2688,2845)
      PsiElement(function)('function')(2688,2696)
      PsiWhiteSpace(' ')(2696,2697)
      CALLABLE_UNIT_SIGNATURE(2697,2781)
        ANY_IDENTIFIER_NAME(2697,2712)
          PsiElement(identifier)('getAttributeStr')(2697,2712)
        PsiElement(()('(')(2712,2713)
        FORMAL_PARAMETER_LIST(2713,2750)
          PARAMETER(2713,2738)
            PARAMETER_WITH_TYPE(2713,2738)
              SIMPLE_TYPE_NAME(2713,2735)
                REFERENCE_TYPE_NAME(2713,2735)
                  USER_DEFINE_TYPE_NAME(2713,2735)
                    NAME_REFERENCE(2713,2735)
                      PACKAGE_REFERENCE(2713,2718)
                        PsiElement(identifier)('http')(2713,2717)
                        PsiElement(:)(':')(2717,2718)
                      PsiElement(identifier)('WebSocketListener')(2718,2735)
              PsiWhiteSpace(' ')(2735,2736)
              PsiElement(identifier)('ep')(2736,2738)
          PsiElement(,)(',')(2738,2739)
          PsiWhiteSpace(' ')(2739,2740)
          PARAMETER(2740,2750)
            PARAMETER_WITH_TYPE(2740,2750)
              SIMPLE_TYPE_NAME(2740,2746)
                VALUE_TYPE_NAME(2740,2746)
                  PsiElement(string)('string')(2740,2746)
              PsiWhiteSpace(' ')(2746,2747)
              PsiElement(identifier)('key')(2747,2750)
        PsiElement())(')')(2750,2751)
        PsiWhiteSpace('\n             ')(2751,2765)
        RETURN_PARAMETER(2765,2781)
          PsiElement(returns)('returns')(2765,2772)
          PsiWhiteSpace(' ')(2772,2773)
          RETURN_TYPE(2773,2781)
            TUPLE_TYPE_NAME(2773,2781)
              PsiElement(()('(')(2773,2774)
              SIMPLE_TYPE_NAME(2774,2780)
                VALUE_TYPE_NAME(2774,2780)
                  PsiElement(string)('string')(2774,2780)
              PsiElement())(')')(2780,2781)
      PsiWhiteSpace(' ')(2781,2782)
      CALLABLE_UNIT_BODY(2782,2845)
        PsiElement({)('{')(2782,2783)
        PsiWhiteSpace('\n    ')(2783,2788)
        BLOCK(2788,2843)
          STATEMENT(2788,2826)
            ASSIGNMENT_STATEMENT(2788,2826)
              PsiElement(var)('var')(2788,2791)
              PsiWhiteSpace(' ')(2791,2792)
              SIMPLE_VARIABLE_REFERENCE(2792,2796)
                NAME_REFERENCE(2792,2796)
                  PsiElement(identifier)('name')(2792,2796)
              PsiWhiteSpace(' ')(2796,2797)
              PsiElement(=)('=')(2797,2798)
              PsiWhiteSpace(' ')(2798,2799)
              TYPE_CONVERSION_EXPRESSION(2799,2825)
                PsiElement(<)('<')(2799,2800)
                SIMPLE_TYPE_NAME(2800,2806)
                  VALUE_TYPE_NAME(2800,2806)
                    PsiElement(string)('string')(2800,2806)
                PsiElement(>)('>')(2806,2807)
                VARIABLE_REFERENCE_EXPRESSION(2807,2825)
                  MAP_ARRAY_VARIABLE_REFERENCE(2807,2825)
                    FIELD_VARIABLE_REFERENCE(2807,2820)
                      SIMPLE_VARIABLE_REFERENCE(2807,2809)
                        NAME_REFERENCE(2807,2809)
                          PsiElement(identifier)('ep')(2807,2809)
                      FIELD(2809,2820)
                        PsiElement(.)('.')(2809,2810)
                        PsiElement(identifier)('attributes')(2810,2820)
                    INDEX(2820,2825)
                      PsiElement([)('[')(2820,2821)
                      VARIABLE_REFERENCE_EXPRESSION(2821,2824)
                        SIMPLE_VARIABLE_REFERENCE(2821,2824)
                          NAME_REFERENCE(2821,2824)
                            PsiElement(identifier)('key')(2821,2824)
                      PsiElement(])(']')(2824,2825)
              PsiElement(;)(';')(2825,2826)
          PsiWhiteSpace('\n    ')(2826,2831)
          STATEMENT(2831,2843)
            RETURN_STATEMENT(2831,2843)
              PsiElement(return)('return')(2831,2837)
              PsiWhiteSpace(' ')(2837,2838)
              VARIABLE_REFERENCE_EXPRESSION(2838,2842)
                SIMPLE_VARIABLE_REFERENCE(2838,2842)
                  NAME_REFERENCE(2838,2842)
                    PsiElement(identifier)('name')(2838,2842)
              PsiElement(;)(';')(2842,2843)
        PsiWhiteSpace('\n')(2843,2844)
        PsiElement(})('}')(2844,2845)